---
navigation.icon: uil:database
description: A Nuxt fornece a fun√ß√£o de composi√ß√£o useState para criar um estado partilhado reativo e amig√°vel √† SSR.
---

# Gest√£o de Estado

A Nuxt fornece a fun√ß√£o de composi√ß√£o `useState` para criar um estado reativo partilhado entre os componentes e amig√°vel √† SSR.

A `useState` √© uma substitui√ß√£o amig√°vel √† SSR de [`ref`](https://vuejs.org/api/reactivity-core#ref). O seu valor ser√° preservado depois da interpreta√ß√£o no lado do servidor (durante a hidrata√ß√£o no lado do cliente) e partilhado entre todos os componentes usando uma chave √∫nica. 

::ReadMore{link="/docs/api/composables/use-state"}
::

::alert{icon=üëâ}
A `useState` apenas funciona durante a `setup` ou [`Gatilhos do Ciclo de Vida`](https://vuejs.org/api/composition-api-lifecycle#composition-api-lifecycle-hooks).
::
::alert{type=warning}
Uma vez que os dados dentro de `useState` ser√£o serializados para JSON, √© importante que n√£o contenha nada que n√£o possa ser serializado, tais como classes, fun√ß√µes ou s√≠mbolos.
::

## Boas Pr√°ticas

::alert{type=danger icon=üö®}
Nunca defina `const state = ref()` fora do marcador `<script setup>` ou fun√ß√£o `setup()`.<br>
Tal estado ser√° partilhado por todos os utilizadores visitando a tua aplica√ß√£o e pode conduzir a vazamentos da mem√≥ria!
::
::alert{type=success icon=‚úÖ}
No lugar de `const state = ref()`, use `const useX = () = useState('x')`.
::

## Exemplos

### Uso B√°sico

Neste exemplo, usamos um estado `counter` (contador em Portugu√™s) local de componente. Qualquer outro componente que usar `useState('counter')` partilhar√° o mesmo estado reativo.

```vue [app.vue]
<script setup>
const counter = useState('counter', () => Math.round(Math.random() * 1000))
</script>

<template>
  <div>
    Counter: {{ counter }}
    <button @click="counter++">
      +
    </button>
    <button @click="counter--">
      -
    </button>
  </div>
</template>
```

::LinkExample{link="/docs/examples/composables/use-state"}
::

::ReadMore{link="/docs/api/composables/use-state"}
::

### Avan√ßado

Neste exemplo, usamos uma fun√ß√£o de composi√ß√£o que deteta localiza√ß√£o padr√£o do utilizador a partir dos cabe√ßalhos da requisi√ß√£o de HTTP e conserva-o em um estado `locale` (localiza√ß√£o em Portugu√™s).

::LinkExample{link="/docs/examples/other/locale"}
::

## Estado Partilhado

Ao usar as [fun√ß√µes de composi√ß√£o importadas automaticamente](/docs/guide/directory-structure/composables) podemos definir estados de tipos seguros globais e import√°-los atrav√©s da aplica√ß√£o: 

```ts [composables/states.ts]
export const useCounter = () => useState<number>('counter', () => 0)
export const useColor = () => useState<string>('color', () => 'pink')
```

```vue [app.vue]
<script setup>
const color = useColor() // O mesmo que useState('color')
</script>

<template>
  <p>Current color: {{ color }}</p>
</template>
```
