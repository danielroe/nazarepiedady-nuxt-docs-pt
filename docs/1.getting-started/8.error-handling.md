---
navigation.icon: uil:bug
---

# Manipulação de Erro

Saiba como capturar os erros nos diferentes ciclos de vida.

## Manipulando os Erros

A Nuxt 3 é uma abstração autossuficiente, o que significa que existem várias fontes de erros de execução do utilizador imprevisíveis que podem acontecer em diferentes contextos:

1. Erros durante o ciclo de vida da interpretação da Vue (SSR + SPA)
2. Erros durante o ciclo de vida da API ou do servidor Nitro
3. Erros durante a inicialização do servidor e cliente (SSR + SPA)
4. Erros durante o descarregamento dos pedaços de JavaScript

### Erros Durante o Ciclo de Vida da Interpretação da Vue (SSR + SPA)

Tu podes prender erros de Vue usando a função de composição [`onErrorCaptured`](https://vuejs.org/api/composition-api-lifecycle#onerrorcaptured).

Além disto, a Nuxt fornece um gatilho `vue:error` que será chamado se quaisquer erros propagar-se até o alto nível.

Se estiveres a usar uma abstração de reportagem de erro, podes fornecer um manipulador global através da [`vueApp.config.errorHandler`](https://vuejs.org/api/application.html#app-config-errorhandler). Ela receberá todos os erros de Vue, mesmo estiverem manipulados.

#### Example With Global Error Reporting Framework

```js
export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.vueApp.config.errorHandler = (error, context) => {
    // ...
  }
})
```

### Erros Durante a Inicialização do Servidor e Cliente (SSR + SPA)

A Nuxt chamará o gatilho `app:error` se houverem erros na inicialização da tua aplicação de Nuxt.

Isto inclui:

* execução das extensões de Nuxt.
* processamento dos gatilhos `app:created` e `app:beforeMount`.
* montagem da aplicação (no lado do cliente), embora devesses manipular este caso com `onErrorCaptured` ou com o `vue:error`.
* processamento do gatilho `app:mounted`.

### Erros Durante o Ciclo de Vida da API ou Servidor Nitro

Atualmente não podes definir um manipulador do lado do servidor para estes erros, mas podes apresentar uma página de erro (consulte a próxima seção).


### Erros Durante o Descarregamento dos Pedaços de JavaScript

Tu poderias deparar-te com erros de carregamento de pedaço devido à uma falha de conectividade da rede ou um nova implementação de produção (que invalida as tuas antigas URLs de pedaço de JavaScript baralhado). A Nuxt fornece suporte embutido para manipulação de erros de carregamento de pedaço realizando um recarregamento forçado quando um pedaço falha ao carregar durante a navegação da rota.

Tu podes mudar este comportamento definindo `experimental.emitRouteChunkError` para `false` (para desativar de todo a prisão destes erros) ou para `manual` se quiseres manipulá-los tu mesmo. Se quiseres manipular os erros de carregamento de pedaço manualmente, podes consultar [a implementação automática](https://github.com/nuxt/nuxt/blob/main/packages/nuxt/src/app/plugins/chunk-reload.client.ts) para teres algumas ideias.

## Apresentando uma Página de Erro

Quando a Nuxt depara-se com um erro fatal, seja durante o ciclo de vida do servidor, ou quando estiver interpretando a tua aplicação de Vue (em ambos SSR e SPA), ou gerará uma resposta de JSON (se for requisitado com o cabeçalho `Accept: application/json`) ou uma página de erro de HTML.

Tu podes personalizar esta página de erro adicionando `~/error.vue` no diretório do código-fonte da tua aplicação, ao lado de `app.vue`. Esta página tem uma única propriedade - `error` que contém um erro para manipulares.

Quando estiveres pronto para remover a página de erro, podes chamar a função auxiliar `clearError`, que recebe um caminho opcional para o qual redirecionar (por exemplo, se quiseres navegar para uma página 'segura').

::alert{type="warning"}
Certifica-te de verificar antes de usar qualquer dependente de extensões de Nuxt, tais como `$route` ou `useRouter`, porque se uma extensão lançou um erro, então não será executada novamente até limpares o erro.
::

### Exemplo

```vue [error.vue]
<template>
  <button @click="handleError">Clear errors</button>
</template>

<script setup>
const props = defineProps({
  error: Object
})

const handleError = () => clearError({ redirect: '/' })
</script>
```

## Error Helper Methods

### `useError`

* `function useError (): Ref<Error | { url, statusCode, statusMessage, message, description, data }>`

This function will return the global Nuxt error that is being handled.

::ReadMore{link="/docs/api/composables/use-error"}
::

### `createError`

* `function createError (err: { cause, data, message, name, stack, statusCode, statusMessage, fatal }): Error`

You can use this function to create an error object with additional metadata. It is usable in both the Vue and Nitro portions of your app, and is meant to be thrown.

If you throw an error created with `createError`:

* on server-side, it will trigger a full-screen error page which you can clear with `clearError`.
* on client-side, it will throw a non-fatal error for you to handle. If you need to trigger a full-screen error page, then you can do this by setting `fatal: true`.

### Example

```vue [pages/movies/[slug].vue]
<script setup>
const route = useRoute()
const { data } = await useFetch(`/api/movies/${route.params.slug}`)
if (!data.value) {
  throw createError({ statusCode: 404, statusMessage: 'Page Not Found' })
}
</script>
```

### `showError`

* `function showError (err: string | Error | { statusCode, statusMessage }): Error`

You can call this function at any point on client-side, or (on server side) directly within middleware, plugins or `setup()` functions. It will trigger a full-screen error page which you can clear with `clearError`.

It is recommended instead to use `throw createError()`.

::ReadMore{link="/docs/api/utils/show-error"}
::

### `clearError`

* `function clearError (options?: { redirect?: string }): Promise<void>`

This function will clear the currently handled Nuxt error. It also takes an optional path to redirect to (for example, if you want to navigate to a 'safe' page).

::ReadMore{link="/docs/api/utils/clear-error"}
::

## Rendering Errors Within Your App

Nuxt also provides a `<NuxtErrorBoundary>` component that allows you to handle client-side errors within your app, without replacing your entire site with an error page.

This component is responsible for handling errors that occur within its default slot. On client-side, it will prevent the error from bubbling up to the top level, and will render the `#error` slot instead.

The `#error` slot will receive `error` as a prop. (If you set `error = null` it will trigger re-rendering the default slot; you'll need to ensure that the error is fully resolved first or the error slot will just be rendered a second time.)

::alert{type="info"}
If you navigate to another route, the error will be cleared automatically.
::

### Example

```vue [pages/index.vue]
<template>
  <!-- some content -->
  <NuxtErrorBoundary @error="someErrorLogger">
    <!-- You use the default slot to render your content -->
    <template #error="{ error }">
      You can display the error locally here.
      <button @click="error = null">
        This will clear the error.
      </button>
    </template>
  </NuxtErrorBoundary>
</template>
```

::LinkExample{link="/docs/examples/app/error-handling"}
::
